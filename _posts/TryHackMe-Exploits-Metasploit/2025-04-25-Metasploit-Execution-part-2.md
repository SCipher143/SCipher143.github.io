---
layout: post
title: "Metasploit: Hands on"
date: 2025-04-25 02:40:00 -0700
categories: [TryHackMe, Exploits]
nav_order: 2
tags: [THM, Exploits]
description: TryHackMe Cyber Security 101 Metasploit
---
# Metasploit Practice

### Lab from THM Metasploit: Exploitation

**Target IP Address = 10.10.11.145**

**Host IP = 10.10.X.X**

#### Questions

Exploit one of the critical vulnerabilities on the target VM

1. Boot up **msfconsole**
2. I like Nmap so i ran "namp -sS -T4 10.10.11.145" This provided a stealth scan at a faster speed and scans the most common 1000 ports

![Desktop View](/assets/img/THM-Metasploit/THM-22.png){: width="800" height="500" }

I also ran a "nmap -sS -A  -T4 10.10.11.145" Which also provides serivce detection and OS detection for fun.

![Desktop View](/assets/img/THM-Metasploit/THM-23.png){: width="800" height="500" }

We know this is Jons PC, Windows 7 and could be vulnerable to some different ports like 139, 445 or 3389. 

After searching and using the ausxillary(scanner/smb/smb_version) module we can learn that it's using smb version 1.

Using our knowledge of the previous THM module we know SMB version 1 is vulnerable to the **ms17_010_eternalblue** exploit which we will use next.

We then run that module and set the payload to a generic/shell_reverse_tcp.

This will then let us exploit the vulnerability on the target VM.

What is the content of the flag.txt file?

Once in we then switch to the **Users** directory -> Jon -> Documents -> Flag.txt  (Using the tree commmand to list out the directories, dir to list the file and type to display it helped find it)

Answer: THM-5455554845

What is the NTLM hash of the password of the user "pirate"?

I realized I needed a metrepreter to use hashdump for this instance. So I ran the same exploit but in a reverse shell with meterpreter instead of a generic.

After backrounding the session using ctrl-z we then use hashdump to find the hash of a password.

![Desktop View](/assets/img/THM-Metasploit/THM-25.png){: width="800" height="500" }

Answer:

![Desktop View](/assets/img/THM-Metasploit/THM-26.png){: width="800" height="500" }

[‚Üê Previous](/posts/TryHackMe-Exploits-Metasploit/)